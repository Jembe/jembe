parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"dB8V":[function(require,module,exports) {
"use strict";function e(){return new Promise(e=>{"loading"==document.readyState?document.addEventListener("DOMContentLoaded",e):e()})}function t(e){return Array.from(new Set(e))}function n(){return navigator.userAgent,navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")}function i(e,t){return e==t}function r(e,t){"template"!==e.tagName.toLowerCase()?console.warn(`Alpine: [${t}] directive should only be added to <template> tags. See https://github.com/alpinejs/alpine#${t}`):1!==e.content.childElementCount&&console.warn(`Alpine: <template> tag with [${t}] encountered with an unexpected number of root elements. Make sure <template> has a single root element. `)}function s(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function o(e){return e.toLowerCase().replace(/-(\w)/g,(e,t)=>t.toUpperCase())}function a(e,t){if(!1===t(e))return;let n=e.firstElementChild;for(;n;)a(n,t),n=n.nextElementSibling}function l(e,t){var n;return function(){var i=this,r=arguments;clearTimeout(n),n=setTimeout(function(){n=null,e.apply(i,r)},t)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.domReady=e,exports.arrayUnique=t,exports.isTesting=n,exports.checkedAttrLooseCompare=i,exports.warnIfMalformedTemplate=r,exports.kebabCase=s,exports.camelCase=o,exports.walk=a,exports.debounce=l,exports.saferEval=p,exports.saferEvalNoReturn=d,exports.isXAttr=m,exports.getXAttrs=x,exports.parseHtmlAttribute=_,exports.isBooleanAttr=b,exports.replaceAtAndColonWithStandardSyntax=v,exports.convertClassStringToArray=h,exports.transitionIn=w,exports.transitionOut=A,exports.transitionHelperIn=C,exports.transitionHelperOut=T,exports.transitionHelper=$,exports.transitionClassesIn=I,exports.transitionClassesOut=L,exports.transitionClasses=S,exports.transition=P,exports.isNumeric=k,exports.once=F,exports.TRANSITION_CANCELLED=exports.TRANSITION_TYPE_OUT=exports.TRANSITION_TYPE_IN=void 0;const c=(e,t,i)=>{if(console.warn(`Jembe Error: "${i}"\n\nExpression: "${t}"\nElement:`,e),!n())throw Object.assign(i,{el:e,expression:t}),i};function u(e,{el:t,expression:n}){try{const r=e();return r instanceof Promise?r.catch(e=>c(t,n,e)):r}catch(i){c(t,n,i)}}function p(e,t,n,i={}){return u(()=>"function"==typeof t?t.call(n):new Function(["$data",...Object.keys(i)],`var __alpine_result; with($data) { __alpine_result = ${t} }; return __alpine_result`)(n,...Object.values(i)),{el:e,expression:t})}function d(e,t,n,i={}){return u(()=>{if("function"==typeof t)return Promise.resolve(t.call(n,i.$event));let e=Function;if(e=Object.getPrototypeOf(async function(){}).constructor,Object.keys(n).includes(t)){let e=new Function(["dataContext",...Object.keys(i)],`with(dataContext) { return ${t} }`)(n,...Object.values(i));return"function"==typeof e?Promise.resolve(e.call(n,i.$event)):Promise.resolve()}return Promise.resolve(new e(["dataContext",...Object.keys(i)],`with(dataContext) { ${t} }`)(n,...Object.values(i)))},{el:e,expression:t})}const f=/^jmb-(on|bind|data|text|html|model|if|for|show|cloak|transition|ref|spread|scope)\b/;function m(e){const t=v(e.name);return f.test(t)}function x(e,t,n){let i=Array.from(e.attributes).filter(m).map(_),r=i.filter(e=>"spread"===e.type)[0];if(r){let n=p(e,r.expression,t.$data);i=i.concat(Object.entries(n).map(([e,t])=>_({name:e,value:t})))}return n?i.filter(e=>e.type===n):y(i)}function y(e){let t=["bind","model","show","catch-all"];return e.sort((e,n)=>{let i=-1===t.indexOf(e.type)?"catch-all":e.type,r=-1===t.indexOf(n.type)?"catch-all":n.type;return t.indexOf(i)-t.indexOf(r)})}function _({name:e,value:t}){const n=v(e),i=n.match(f),r=n.match(/:([a-zA-Z0-9\-:]+)/),s=n.match(/\.[^.\]]+(?=[^\]]*$)/g)||[];return{type:i?i[1]:null,value:r?r[1]:null,modifiers:s.map(e=>e.replace(".","")),expression:t}}function b(e){return["disabled","checked","required","readonly","hidden","open","selected","autofocus","itemscope","multiple","novalidate","allowfullscreen","allowpaymentrequest","formnovalidate","autoplay","controls","loop","muted","playsinline","default","ismap","reversed","async","defer","nomodule"].includes(e)}function v(e){return e.startsWith("@")?e.replace("@","jmb-on:"):e.startsWith(":")?e.replace(":","jmb-bind:"):e}function h(e,t=Boolean){return e.split(" ").filter(t)}const g="in";exports.TRANSITION_TYPE_IN=g;const O="out";exports.TRANSITION_TYPE_OUT=O;const j="cancelled";function w(e,t,n,i,r=!1){if(r)return t();if(e.__jmb_transition&&e.__jmb_transition.type===g)return;const s=x(e,i,"transition"),o=x(e,i,"show")[0];if(o&&o.modifiers.includes("transition")){let i=o.modifiers;if(i.includes("out")&&!i.includes("in"))return t();const r=i.includes("in")&&i.includes("out");C(e,i=r?i.filter((e,t)=>t<i.indexOf("out")):i,t,n)}else s.some(e=>["enter","enter-start","enter-end"].includes(e.value))?I(e,i,s,t,n):t()}function A(e,t,n,i,r=!1){if(r)return t();if(e.__jmb_transition&&e.__jmb_transition.type===O)return;const s=x(e,i,"transition"),o=x(e,i,"show")[0];if(o&&o.modifiers.includes("transition")){let i=o.modifiers;if(i.includes("in")&&!i.includes("out"))return t();const r=i.includes("in")&&i.includes("out");T(e,i=r?i.filter((e,t)=>t>i.indexOf("out")):i,r,t,n)}else s.some(e=>["leave","leave-start","leave-end"].includes(e.value))?L(e,i,s,t,n):t()}function C(e,t,n,i){$(e,t,n,()=>{},i,{duration:N(t,"duration",150),origin:N(t,"origin","center"),first:{opacity:0,scale:N(t,"scale",95)},second:{opacity:1,scale:100}},g)}function T(e,t,n,i,r){$(e,t,()=>{},i,r,{duration:n?N(t,"duration",150):N(t,"duration",150)/2,origin:N(t,"origin","center"),first:{opacity:1,scale:100},second:{opacity:0,scale:N(t,"scale",95)}},O)}function N(e,t,n){if(-1===e.indexOf(t))return n;const i=e[e.indexOf(t)+1];if(!i)return n;if("scale"===t&&!k(i))return n;if("duration"===t){let e=i.match(/([0-9]+)ms/);if(e)return e[1]}return"origin"===t&&["top","right","left","center","bottom"].includes(e[e.indexOf(t)+2])?[i,e[e.indexOf(t)+2]].join(" "):i}function $(e,t,n,i,r,s,o){e.__jmb_transition&&e.__jmb_transition.cancel&&e.__jmb_transition.cancel();const a=e.style.opacity,l=e.style.transform,c=e.style.transformOrigin,u=!t.includes("opacity")&&!t.includes("scale"),p=u||t.includes("opacity"),d=u||t.includes("scale"),f={start(){p&&(e.style.opacity=s.first.opacity),d&&(e.style.transform=`scale(${s.first.scale/100})`)},during(){d&&(e.style.transformOrigin=s.origin),e.style.transitionProperty=[p?"opacity":"",d?"transform":""].join(" ").trim(),e.style.transitionDuration=`${s.duration/1e3}s`,e.style.transitionTimingFunction="cubic-bezier(0.4, 0.0, 0.2, 1)"},show(){n()},end(){p&&(e.style.opacity=s.second.opacity),d&&(e.style.transform=`scale(${s.second.scale/100})`)},hide(){i()},cleanup(){p&&(e.style.opacity=a),d&&(e.style.transform=l),d&&(e.style.transformOrigin=c),e.style.transitionProperty=null,e.style.transitionDuration=null,e.style.transitionTimingFunction=null}};P(e,f,o,r)}exports.TRANSITION_CANCELLED=j;const E=(e,t,n)=>"function"==typeof e?n.evaluateReturnExpression(t,e):e;function I(e,t,n,i,r){S(e,h(E((n.find(e=>"enter"===e.value)||{expression:""}).expression,e,t)),h(E((n.find(e=>"enter-start"===e.value)||{expression:""}).expression,e,t)),h(E((n.find(e=>"enter-end"===e.value)||{expression:""}).expression,e,t)),i,()=>{},g,r)}function L(e,t,n,i,r){S(e,h(E((n.find(e=>"leave"===e.value)||{expression:""}).expression,e,t)),h(E((n.find(e=>"leave-start"===e.value)||{expression:""}).expression,e,t)),h(E((n.find(e=>"leave-end"===e.value)||{expression:""}).expression,e,t)),()=>{},i,O,r)}function S(e,t,n,i,r,s,o,a){e.__jmb_transition&&e.__jmb_transition.cancel&&e.__jmb_transition.cancel();const l=e.__jmb_original_classes||[],c={start(){e.classList.add(...n)},during(){e.classList.add(...t)},show(){r()},end(){e.classList.remove(...n.filter(e=>!l.includes(e))),e.classList.add(...i)},hide(){s()},cleanup(){e.classList.remove(...t.filter(e=>!l.includes(e))),e.classList.remove(...i.filter(e=>!l.includes(e)))}};P(e,c,o,a)}function P(e,t,n,i){const r=F(()=>{t.hide(),e.isConnected&&t.cleanup(),delete e.__jmb_transition});e.__jmb_transition={type:n,cancel:F(()=>{i(j),r()}),finish:r,nextFrame:null},t.start(),t.during(),e.__jmb_transition.nextFrame=requestAnimationFrame(()=>{let n=1e3*Number(getComputedStyle(e).transitionDuration.replace(/,.*/,"").replace("s",""));0===n&&(n=1e3*Number(getComputedStyle(e).animationDuration.replace("s",""))),t.show(),e.__jmb_transition.nextFrame=requestAnimationFrame(()=>{t.end(),setTimeout(e.__jmb_transition.finish,n)})})}function k(e){return!Array.isArray(e)&&!isNaN(e)}function F(e){let t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}
},{}],"YwI4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.handleForDirective=t;var e=require("../utils");function t(t,f,u,s,a){(0,e.warnIfMalformedTemplate)(f,"jmb-for");let c=n("function"==typeof u?t.evaluateReturnExpression(f,u):u),b=o(t,f,c,a),x=f;b.forEach((n,o)=>{let _=r(c,n,o,b,a()),u=i(t,f,o,_),E=m(x.nextElementSibling,u);E?(delete E.__jmb_for_key,E.__jmb_for=_,t.updateElements(E,()=>E.__jmb_for)):(E=l(f,x),(0,e.transitionIn)(E,()=>{},()=>{},t,s),E.__jmb_for=_,t.initializeElements(E,()=>E.__jmb_for)),(x=E).__jmb_for_key=u}),_(x,t)}function n(e){let t=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,n=String(e).match(/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/);if(!n)return;let r={};r.items=n[2].trim();let i=n[1].trim().replace(/^\(|\)$/g,""),o=i.match(t);return o?(r.item=i.replace(t,"").trim(),r.index=o[1].trim(),o[2]&&(r.collection=o[2].trim())):r.item=i,r}function r(e,t,n,r,i){let o=i?{...i}:{};return o[e.item]=t,e.index&&(o[e.index]=n),e.collection&&(o[e.collection]=r),o}function i(t,n,r,i){let o=(0,e.getXAttrs)(n,t,"bind").filter(e=>"key"===e.value)[0];return o?t.evaluateReturnExpression(n,o.expression,()=>i):r}function o(t,n,r,i){let o=(0,e.getXAttrs)(n,t,"if")[0];if(o&&!t.evaluateReturnExpression(n,o.expression))return[];let l=t.evaluateReturnExpression(n,r.items,i);return(0,e.isNumeric)(l)&&l>=0&&(l=Array.from(Array(l).keys(),e=>e+1)),l}function l(e,t){let n=document.importNode(e.content,!0);return t.parentElement.insertBefore(n,t.nextElementSibling),t.nextElementSibling}function m(e,t){if(!e)return;if(void 0===e.__jmb_for_key)return;if(e.__jmb_for_key===t)return e;let n=e;for(;n;){if(n.__jmb_for_key===t)return n.parentElement.insertBefore(n,e);n=!(!n.nextElementSibling||void 0===n.nextElementSibling.__jmb_for_key)&&n.nextElementSibling}}function _(t,n){for(var r=!(!t.nextElementSibling||void 0===t.nextElementSibling.__jmb_for_key)&&t.nextElementSibling;r;){let t=r,i=r.nextElementSibling;(0,e.transitionOut)(r,()=>{t.remove()},()=>{},n),r=!(!i||void 0===i.__jmb_for_key)&&i}}
},{"../utils":"dB8V"}],"apEo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.handleAttributeBindingDirective=i;var e=require("../utils"),t=r(require("../index"));function r(e){return e&&e.__esModule?e:{default:e}}function i(r,i,o,n,c,l,u){var d=r.evaluateReturnExpression(i,n,c);if("value"===o){if(t.default.ignoreFocusedForValueBinding&&document.activeElement.isSameNode(i))return;if(void 0===d&&String(n).match(/\./)&&(d=""),"radio"===i.type)void 0===i.attributes.value&&"bind"===l?i.value=d:"bind"!==l&&(i.checked=(0,e.checkedAttrLooseCompare)(i.value,d));else if("checkbox"===i.type)"boolean"==typeof d||[null,void 0].includes(d)||"bind"!==l?"bind"!==l&&(Array.isArray(d)?i.checked=d.some(t=>(0,e.checkedAttrLooseCompare)(t,i.value)):i.checked=!!d):i.value=String(d);else if("SELECT"===i.tagName)s(i,d);else{if(i.value===d)return;i.value=d}}else if("class"===o)if(Array.isArray(d)){const t=i.__jmb_original_classes||[];i.setAttribute("class",(0,e.arrayUnique)(t.concat(d)).join(" "))}else if("object"==typeof d){Object.keys(d).sort((e,t)=>d[e]-d[t]).forEach(t=>{d[t]?(0,e.convertClassStringToArray)(t).forEach(e=>i.classList.add(e)):(0,e.convertClassStringToArray)(t).forEach(e=>i.classList.remove(e))})}else{const t=i.__jmb_original_classes||[],r=d?(0,e.convertClassStringToArray)(d):[];i.setAttribute("class",(0,e.arrayUnique)(t.concat(r)).join(" "))}else o=u.includes("camel")?(0,e.camelCase)(o):o,[null,void 0,!1].includes(d)?i.removeAttribute(o):(0,e.isBooleanAttr)(o)?a(i,o,o):a(i,o,d)}function a(e,t,r){e.getAttribute(t)!=r&&e.setAttribute(t,r)}function s(e,t){const r=[].concat(t).map(e=>e+"");Array.from(e.options).forEach(e=>{e.selected=r.includes(e.value||e.text)})}
},{"../utils":"dB8V","../index":"ewYM"}],"rqI0":[function(require,module,exports) {
"use strict";function e(e,t,i){void 0===t&&String(i).match(/\./)&&(t=""),e.textContent=t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.handleTextDirective=e;
},{}],"VLcL":[function(require,module,exports) {
"use strict";function e(e,t,r,n){t.innerHTML=e.evaluateReturnExpression(t,r,n)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.handleHtmlDirective=e;
},{}],"yazp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.handleShowDirective=t;var e=require("../utils");function t(t,i,s,n,o=!1){const r=()=>{i.style.display="none",i.__jmb_is_shown=!1},l=()=>{1===i.style.length&&"none"===i.style.display?i.removeAttribute("style"):i.style.removeProperty("display"),i.__jmb_is_shown=!0};if(!0===o)return void(s?l():r());const a=(n,o)=>{s?(("none"===i.style.display||i.__jmb_transition)&&(0,e.transitionIn)(i,()=>{l()},o,t),n(()=>{})):"none"!==i.style.display?(0,e.transitionOut)(i,()=>{n(()=>{r()})},o,t):n(()=>{})};n.includes("immediate")?a(e=>e(),()=>{}):(t.showDirectiveLastElement&&!t.showDirectiveLastElement.contains(i)&&t.executeAndClearRemainingShowDirectiveStack(),t.showDirectiveStack.push(a),t.showDirectiveLastElement=i)}
},{"../utils":"dB8V"}],"OKCH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.handleIfDirective=n;var e=require("../utils");function n(n,t,i,l,m){(0,e.warnIfMalformedTemplate)(t,"jmb-if");const r=t.nextElementSibling&&!0===t.nextElementSibling.__jmb_inserted_me;if(!i||r&&!t.__jmb_transition)!i&&r&&(0,e.transitionOut)(t.nextElementSibling,()=>{t.nextElementSibling.remove()},()=>{},n,l);else{const i=document.importNode(t.content,!0);t.parentElement.insertBefore(i,t.nextElementSibling),(0,e.transitionIn)(t.nextElementSibling,()=>{},()=>{},n,l),n.initializeElements(t.nextElementSibling,m),t.nextElementSibling.__jmb_inserted_me=!0}}
},{"../utils":"dB8V"}],"Pi21":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerListener=t;var e=require("../utils");function t(t,r,d,o,u,a=(()=>{}),c=!1){const l={passive:o.includes("passive")};let m,f;if(o.includes("camel")&&(d=(0,e.camelCase)(d)),o.includes("away")?(f=document,m=(e=>{r.contains(e.target)||r.offsetWidth<1&&r.offsetHeight<1||(n(t,u,e,a,r),o.includes("once")&&document.removeEventListener(d,m,l))})):(f=o.includes("window")?window:o.includes("document")?document:r,m=(e=>{if((f===window||f===document)&&!document.body.contains(r))return void f.removeEventListener(d,m,l);if(i(d)&&s(e,o))return;o.includes("prevent")&&e.preventDefault(),o.includes("stop")&&e.stopPropagation();const c="ready"===e.type?e.detail.target:e.target;if(!o.includes("self")||c===r){n(t,u,e,a,r).then(t=>{!1===t?e.preventDefault():o.includes("once")&&f.removeEventListener(d,m,l)})}})),o.includes("defer")||(m=((e,t)=>n=>{e.$jmb.callsCommands=!1,t(n),!0===e.$jmb.callsCommands&&e.$jmb.executeCommands(!o.includes("nonblocking"))})(t,m)),o.includes("debounce")){let t=o[o.indexOf("debounce")+1]||"invalid-wait",n=(0,e.isNumeric)(t.split("ms")[0])?Number(t.split("ms")[0]):250;m=(0,e.debounce)(m,n,this)}const p=o.find(e=>e.startsWith("delay"));if(void 0!==p){const e=p.split("-").slice(1).join("-");let n=o[o.indexOf(p)+1];if(n=void 0!==n&&n.endsWith("ms")?parseInt(n.substr(0,n.length-2)):250,void 0===e)m=((e,t)=>i=>{var s=window.setTimeout(function(){t(i)},n);e.unnamedTimers.push(s)})(t,m);else{let i=(new Date).getTime();if(void 0!==t.originalComponentNamedTimers[e]&&(i=t.originalComponentNamedTimers[e].start,n-=(new Date).getTime()-i),!(n>0))return void t.nextTickStack.push(()=>{m(new CustomEvent("ready",{detail:{target:r}}))});m=((t,s)=>r=>{var d=window.setTimeout(function(){delete t.namedTimers[e],window.clearTimeout(d),s(r)},n);t.namedTimers[e]={id:d,start:i}})(t,m)}}"ready"===d?c&&o.includes("once")||t.nextTickStack.push(()=>{m(new CustomEvent("ready",{detail:{target:r}}))}):(void 0===r.__jmb_listeners&&(r.__jmb_listeners=[]),r.__jmb_listeners.push([f,d,m,l]),f.addEventListener(d,m,l))}function n(e,t,n,i,s){const r="ready"===n.type?n.detail.target:n.target;return e.evaluateCommandExpression(r,t,()=>({...i(),$event:n,$self:s}))}function i(e){return["keydown","keyup"].includes(e)}function s(t,n){let i=n.filter(e=>!["window","document","prevent","stop"].includes(e));if(i.includes("debounce")){let t=i.indexOf("debounce");i.splice(t,(0,e.isNumeric)((i[t+1]||"invalid-wait").split("ms")[0])?2:1)}if(0===i.length)return!1;if(1===i.length&&i[0]===r(t.key))return!1;const s=["ctrl","shift","alt","meta","cmd","super"].filter(e=>i.includes(e));if(i=i.filter(e=>!s.includes(e)),s.length>0){if(s.filter(e=>("cmd"!==e&&"super"!==e||(e="meta"),t[`${e}Key`])).length===s.length&&i[0]===r(t.key))return!1}return!0}function r(t){switch(t){case"/":return"slash";case" ":case"Spacebar":return"space";default:return t&&(0,e.kebabCase)(t)}}
},{"../utils":"dB8V"}],"KdFM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerModelListener=r;var e=require("./on"),t=require("../utils");function r(t,r,n,a,s){var u="select"===r.tagName.toLowerCase()||["checkbox","radio"].includes(r.type)||n.includes("lazy")?"change":"input";const c=`${a} = rightSideOfExpression($event, ${a})`;(0,e.registerListener)(t,r,u,n,c,()=>({...s(),rightSideOfExpression:i(r,n,a)}))}function i(e,r,i){return"radio"===e.type&&(e.hasAttribute("name")||e.setAttribute("name",i)),(i,a)=>{if(i instanceof CustomEvent&&i.detail)return i.detail;if("checkbox"===e.type){if(Array.isArray(a)){const e=r.includes("number")?n(i.target.value):i.target.value;return i.target.checked?a.concat([e]):a.filter(r=>!(0,t.checkedAttrLooseCompare)(r,e))}return i.target.checked}if("select"===e.tagName.toLowerCase()&&e.multiple)return r.includes("number")?Array.from(i.target.selectedOptions).map(e=>{return n(e.value||e.text)}):Array.from(i.target.selectedOptions).map(e=>e.value||e.text);{const e=i.target.value;return r.includes("number")?n(e):r.includes("trim")?e.trim():e}}}function n(e){const r=e?parseFloat(e):null;return(0,t.isNumeric)(r)?r:e}
},{"./on":"Pi21","../utils":"dB8V"}],"yKkd":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const{isArray:t}=Array,{getPrototypeOf:r,create:n,defineProperty:a,isExtensible:s,getOwnPropertyDescriptor:o,getOwnPropertyNames:i,getOwnPropertySymbols:u,preventExtensions:l,hasOwnProperty:c}=Object,{push:p,concat:h}=Array.prototype,g={}.toString;function y(e){return e&&e.toString?e.toString():"object"==typeof e?g.call(e):e+""}function f(e){return void 0===e}function d(e){return"function"==typeof e}const w=new WeakMap;function v(e,t){w.set(e,t)}const b=e=>w.get(e)||e;class O{constructor(e,t){this.originalTarget=t,this.membrane=e}wrapDescriptor(e){if(c.call(e,"value"))e.value=this.wrapValue(e.value);else{const{set:t,get:r}=e;f(r)||(e.get=this.wrapGetter(r)),f(t)||(e.set=this.wrapSetter(t))}return e}copyDescriptorIntoShadowTarget(e,t){const{originalTarget:r}=this,n=o(r,t);if(!f(n)){const r=this.wrapDescriptor(n);a(e,t,r)}}lockShadowTarget(e){const{originalTarget:t}=this;h.call(i(t),u(t)).forEach(t=>{this.copyDescriptorIntoShadowTarget(e,t)});const{membrane:{tagPropertyKey:r}}=this;f(r)||c.call(e,r)||a(e,r,n(null)),l(e)}apply(e,t,r){}construct(e,t,r){}get(e,t){const{originalTarget:r,membrane:{valueObserved:n}}=this,a=r[t];return n(r,t),this.wrapValue(a)}has(e,t){const{originalTarget:r,membrane:{tagPropertyKey:n,valueObserved:a}}=this;return a(r,t),t in r||t===n}ownKeys(e){const{originalTarget:t,membrane:{tagPropertyKey:r}}=this,n=f(r)||c.call(t,r)?[]:[r];return p.apply(n,i(t)),p.apply(n,u(t)),n}isExtensible(e){const{originalTarget:t}=this;return!!s(e)&&(!!s(t)||(this.lockShadowTarget(e),!1))}getPrototypeOf(e){const{originalTarget:t}=this;return r(t)}getOwnPropertyDescriptor(e,t){const{originalTarget:r,membrane:{valueObserved:n,tagPropertyKey:s}}=this;n(r,t);let i=o(r,t);if(f(i)){if(t!==s)return;return a(e,s,i={value:void 0,writable:!1,configurable:!1,enumerable:!1}),i}return!1===i.configurable&&this.copyDescriptorIntoShadowTarget(e,t),this.wrapDescriptor(i)}}const P=new WeakMap,m=new WeakMap,T=new WeakMap,x=new WeakMap;class D extends O{wrapValue(e){return this.membrane.getProxy(e)}wrapGetter(e){const t=P.get(e);if(!f(t))return t;const r=this,n=function(){return r.wrapValue(e.call(b(this)))};return P.set(e,n),T.set(n,e),n}wrapSetter(e){const t=m.get(e);if(!f(t))return t;const r=function(t){e.call(b(this),b(t))};return m.set(e,r),x.set(r,e),r}unwrapDescriptor(e){if(c.call(e,"value"))e.value=b(e.value);else{const{set:t,get:r}=e;f(r)||(e.get=this.unwrapGetter(r)),f(t)||(e.set=this.unwrapSetter(t))}return e}unwrapGetter(e){const t=T.get(e);if(!f(t))return t;const r=this,n=function(){return b(e.call(r.wrapValue(this)))};return P.set(n,e),T.set(e,n),n}unwrapSetter(e){const t=x.get(e);if(!f(t))return t;const r=this,n=function(t){e.call(r.wrapValue(this),r.wrapValue(t))};return m.set(n,e),x.set(e,n),n}set(e,r,n){const{originalTarget:a,membrane:{valueMutated:s}}=this;return a[r]!==n?(a[r]=n,s(a,r)):"length"===r&&t(a)&&s(a,r),!0}deleteProperty(e,t){const{originalTarget:r,membrane:{valueMutated:n}}=this;return delete r[t],n(r,t),!0}setPrototypeOf(e,t){0}preventExtensions(e){if(s(e)){const{originalTarget:t}=this;if(l(t),s(t))return!1;this.lockShadowTarget(e)}return!0}defineProperty(e,t,r){const{originalTarget:n,membrane:{valueMutated:s,tagPropertyKey:o}}=this;return t===o&&!c.call(n,t)||(a(n,t,this.unwrapDescriptor(r)),!1===r.configurable&&this.copyDescriptorIntoShadowTarget(e,t),s(n,t),!0)}}const M=new WeakMap,S=new WeakMap;class j extends O{wrapValue(e){return this.membrane.getReadOnlyProxy(e)}wrapGetter(e){const t=M.get(e);if(!f(t))return t;const r=this,n=function(){return r.wrapValue(e.call(b(this)))};return M.set(e,n),n}wrapSetter(e){const t=S.get(e);if(!f(t))return t;const r=function(e){0};return S.set(e,r),r}set(e,t,r){return!1}deleteProperty(e,t){return!1}setPrototypeOf(e,t){0}preventExtensions(e){return!1}defineProperty(e,t,r){return!1}}function k(e){if(t(e))return e.map(e=>{const t=b(e);return t!==e?k(t):e});const a=n(r(e)),s=i(e);return h.call(s,u(e)).reduce((t,r)=>{const n=e[r],a=b(n);return t[r]=a!==n?k(a):n,t},a)}const G={header:e=>{const t=b(e);return t&&t!==e?["object",{object:k(e)}]:null},hasBody:()=>!1,body:()=>null};function I(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{}}function V(){throw new ReferenceError}const W=Object.prototype;function K(e){if(null===e)return!1;if("object"!=typeof e)return!1;if(t(e))return!0;const n=r(e);return n===W||null===n||null===r(n)}const E=(e,t)=>{},R=(e,t)=>{},H=e=>e;function A(e){return t(e)?[]:{}}class _{constructor(e){if(this.valueDistortion=H,this.valueMutated=R,this.valueObserved=E,this.valueIsObservable=K,this.readOnlyObjectGraph=new WeakMap,this.reactiveObjectGraph=new WeakMap,!f(e)){const{valueDistortion:t,valueMutated:r,valueObserved:n,valueIsObservable:a,tagPropertyKey:s}=e;this.valueDistortion=d(t)?t:H,this.valueMutated=d(r)?r:R,this.valueObserved=d(n)?n:E,this.valueIsObservable=d(a)?a:K,this.tagPropertyKey=s}}getProxy(e){const t=b(e),r=this.valueDistortion(t);return this.valueIsObservable(r)?this.readOnlyObjectGraph.get(r)===e?e:this.getReactiveHandler(t,r):r}getReadOnlyProxy(e){e=b(e);const t=this.valueDistortion(e);return this.valueIsObservable(t)?this.getReadOnlyHandler(e,t):t}unwrapProxy(e){return b(e)}getReactiveHandler(e,t){let r=this.reactiveObjectGraph.get(t);if(f(r)){const n=new D(this,t);v(r=new Proxy(A(t),n),e),this.reactiveObjectGraph.set(t,r)}return r}getReadOnlyHandler(e,t){let r=this.readOnlyObjectGraph.get(t);if(f(r)){const n=new j(this,t);v(r=new Proxy(A(t),n),e),this.readOnlyObjectGraph.set(t,r)}return r}}exports.default=_;
},{}],"bXHm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrap=t,exports.unwrap=u;var e=r(require("observable-membrane"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r,t){let u=new e.default({valueMutated(e,r){t(e,r)}});return{data:u.getProxy(r),membrane:u}}function u(e,r){let t=e.unwrapProxy(r),u={};return Object.keys(t).forEach(e=>{["$el","$refs","$nextTick","$watch","$jmb"].includes(e)||(u[e]=t[e])}),u}
},{"observable-membrane":"yKkd"}],"FT5O":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"TaLr":[function(require,module,exports) {
var process = require("process");
var r=require("process");function t(r,t){for(var e=0,n=r.length-1;n>=0;n--){var o=r[n];"."===o?r.splice(n,1):".."===o?(r.splice(n,1),e++):e&&(r.splice(n,1),e--)}if(t)for(;e--;e)r.unshift("..");return r}function e(r){"string"!=typeof r&&(r+="");var t,e=0,n=-1,o=!0;for(t=r.length-1;t>=0;--t)if(47===r.charCodeAt(t)){if(!o){e=t+1;break}}else-1===n&&(o=!1,n=t+1);return-1===n?"":r.slice(e,n)}function n(r,t){if(r.filter)return r.filter(t);for(var e=[],n=0;n<r.length;n++)t(r[n],n,r)&&e.push(r[n]);return e}exports.resolve=function(){for(var e="",o=!1,s=arguments.length-1;s>=-1&&!o;s--){var i=s>=0?arguments[s]:r.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(e=i+"/"+e,o="/"===i.charAt(0))}return(o?"/":"")+(e=t(n(e.split("/"),function(r){return!!r}),!o).join("/"))||"."},exports.normalize=function(r){var e=exports.isAbsolute(r),s="/"===o(r,-1);return(r=t(n(r.split("/"),function(r){return!!r}),!e).join("/"))||e||(r="."),r&&s&&(r+="/"),(e?"/":"")+r},exports.isAbsolute=function(r){return"/"===r.charAt(0)},exports.join=function(){var r=Array.prototype.slice.call(arguments,0);return exports.normalize(n(r,function(r,t){if("string"!=typeof r)throw new TypeError("Arguments to path.join must be strings");return r}).join("/"))},exports.relative=function(r,t){function e(r){for(var t=0;t<r.length&&""===r[t];t++);for(var e=r.length-1;e>=0&&""===r[e];e--);return t>e?[]:r.slice(t,e-t+1)}r=exports.resolve(r).substr(1),t=exports.resolve(t).substr(1);for(var n=e(r.split("/")),o=e(t.split("/")),s=Math.min(n.length,o.length),i=s,u=0;u<s;u++)if(n[u]!==o[u]){i=u;break}var f=[];for(u=i;u<n.length;u++)f.push("..");return(f=f.concat(o.slice(i))).join("/")},exports.sep="/",exports.delimiter=":",exports.dirname=function(r){if("string"!=typeof r&&(r+=""),0===r.length)return".";for(var t=r.charCodeAt(0),e=47===t,n=-1,o=!0,s=r.length-1;s>=1;--s)if(47===(t=r.charCodeAt(s))){if(!o){n=s;break}}else o=!1;return-1===n?e?"/":".":e&&1===n?"/":r.slice(0,n)},exports.basename=function(r,t){var n=e(r);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},exports.extname=function(r){"string"!=typeof r&&(r+="");for(var t=-1,e=0,n=-1,o=!0,s=0,i=r.length-1;i>=0;--i){var u=r.charCodeAt(i);if(47!==u)-1===n&&(o=!1,n=i+1),46===u?-1===t?t=i:1!==s&&(s=1):-1!==t&&(s=-1);else if(!o){e=i+1;break}}return-1===t||-1===n||0===s||1===s&&t===n-1&&t===e+1?"":r.slice(t,n)};var o="b"==="ab".substr(-1)?function(r,t,e){return r.substr(t,e)}:function(r,t,e){return t<0&&(t=r.length+t),r.substr(t,e)};
},{"process":"FT5O"}],"W7MR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("path");class t{constructor(e,t){this.jembeClient=e,this.execName=t,this.callsCommands=!1}call(e,...t){this.callsCommands=!0;let s={},i=[];1===t.length&&t[0].constructor==Object?s=t[0]:i=t,this.jembeClient.addCallCommand(this.execName,e,i,s)}display(){this.call("display")}set(e,t){if(this.callsCommands=!0,t instanceof FileList||t instanceof File)this.jembeClient.addFilesForUpload(this.execName,e,t);else{let s={};s[e]=t,this.jembeClient.addInitialiseCommand(this.execName,s)}}emit(e,t={},s=null){this.callsCommands=!0,this.jembeClient.addEmitCommand(this.execName,e,t,s)}component(s,i={},l=!0){this.callsCommands=!0;let n=s;(0,e.isAbsolute)(s)||(n=(0,e.join)(this.execName,s));let m=[],a=[],o=0,c=!0,h=n.split("/"),d=this.execName.split("/");for(;o<h.length;)!0===c&&(h[o]!==d[o]||o===h.length-1&&i!=={})&&(c=!1),c?a.push(h[o]):m.push(h[o]),o++;for(o=0;o<m.length;)this.jembeClient.addInitialiseCommand([a.join("/"),m.slice(0,o+1).join("/")].join("/"),o==m.length-1?i:{},l),o++;return new t(this.jembeClient,n)}component_reset(e,t={}){return this.component(e,t,!1)}executeCommands(e=!0){this.jembeClient.executeCommands(e)}componentsOnPage(e){return void 0===e?Object.keys(this.jembeClient.components):Object.values(this.jembeClient.components).filter(e).map(e=>e.execName)}}exports.default=t;
},{"path":"TaLr"}],"xaPW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./utils"),t=require("./directives/for"),i=require("./directives/bind"),s=require("./directives/text"),r=require("./directives/html"),a=require("./directives/show"),n=require("./directives/if"),o=require("./directives/model"),h=require("./directives/on"),c=require("./observable"),l=u(require("./magic/jmb"));function u(e){return e&&e.__esModule?e:{default:e}}class d{constructor(e){this.$el=e,this.mounted=!1,this.jembeClient=void 0,this.execName=void 0,this.state=void 0,this.actions=void 0,this.unnamedTimers=[],this.namedTimers={},this.originalComponentNamedTimers={},this.mutationObserver=void 0}mount(t,i,s,r,a){if(this.mounted&&(this.jembeClient!==t||this.execName!==i))throw`Mounting ComponetApi for new component: ${this.execName} -> ${i}`;this.mounted=!0,this.jembeClient=t,this.execName=i,this.$jmb=new l.default(this.jembeClient,this.execName),void 0!==a&&(this.originalComponentNamedTimers=a.namedTimers);var n=this;this.$updateDom=(0,e.debounce)(function(){n.updateElements(n.$el)},0),this.state=JSON.parse(JSON.stringify(s)),this.actions=r;for(const e of Object.keys(this.state))Object.keys(this.actions).includes(e)&&console.warn(`state param '${e}' overrides action with same name in component ${this.execName}!`);const o=this.$el.getAttribute("jmb-local"),h=""===o||null===o?"{}":o,c=this.$el.getAttribute("jmb-init"),u=""===c||null===c?"{}":c,d=this.$el.getAttribute("jmb-update"),m=""===d||null===d?"{}":d;let b={$el:this.$el,$jmb:this.$jmb};this.$el;this.unobservedData={$local:void 0===a?(0,e.saferEval)(this.$el,h,b):a.getUnobservedData().$local},Object.entries(this.actions).forEach(([e,t])=>{Object.defineProperty(this.unobservedData,`${e}`,{get:function(){return(...t)=>{this.$jmb.call(e,...t)}}})}),Object.entries(this.state).forEach(([e,t])=>{this.unobservedData[e]=t});let{membrane:v,data:p}=this.wrapDataInObservable(this.unobservedData);var f;this.$data=p,this.membrane=v,this.unobservedData.$el=this.$el,this.unobservedData.$refs=this.getRefsProxy(),this.unobservedData.$jmb=this.$jmb,this.unobservedData.$updateDom=this.$updateDom,this.unobservedData.$context=this.$data,this.nextTickStack=[],this.unobservedData.$nextTick=(e=>{this.nextTickStack.push(e)}),this.watchers=void 0!==a?a.watchers:{},this.unobservedData.$watch=((e,t)=>{this.watchers[e]||(this.watchers[e]=[]),this.watchers[e].push(t)}),this.showDirectiveStack=[],this.showDirectiveLastElement,void 0===a&&u?(this.pauseReactivity=!0,f=this.evaluateReturnExpression(this.$el,u),this.pauseReactivity=!1):void 0!==a&&m&&(this.pauseReactivity=!0,f=this.evaluateReturnExpression(this.$el,m),this.pauseReactivity=!1),this.initializeElements(this.$el,()=>{},void 0!==a),this.mutationObserver=this.listenForNewElementsToInitialize(),"function"==typeof f&&f.call(this.$data)}unmount(){for(const e of this.unnamedTimers)window.clearTimeout(e);for(const[e,t]of Object.entries(this.namedTimers))window.clearTimeout(t.id);this.mutationObserver.disconnect(),this.mutationObserver=void 0}getUnobservedData(){return(0,c.unwrap)(this.membrane,this.$data)}findTargetPathInData(e,t,i="",s=0){if(Object.is(e,t))return i;const r=Array.isArray(e);for(const[a,n]of Object.entries(e))if(!(0===s&&a.startsWith("$")||r&&"length"===a)&&"object"==typeof n&&null!==n){const e=this.findTargetPathInData(n,t,a,s+1);if(void 0!==e)return""!==i?`${i}.${e}`:e}}wrapDataInObservable(t){var i=this;let s=(0,e.debounce)(function(){i.updateElements(i.$el)},0);return(0,c.wrap)(t,(e,t)=>{let r=this.findTargetPathInData(this.unobservedData,e);void 0!==r&&this.$jmb.set(""===r?t:`${r}.${t}`,e[t]),Object.is(e,this.unobservedData)&&Object.keys(this.state).includes(t)&&this.$jmb.set(t,e[t]),i.watchers[t]?i.watchers[t].forEach(i=>i(e[t])):Array.isArray(e)?Object.keys(i.watchers).forEach(s=>{let r=s.split(".");"length"!==t&&r.reduce((t,r)=>(Object.is(e,t[r])&&i.watchers[s].forEach(t=>t(e)),t[r]),i.unobservedData)}):Object.keys(i.watchers).filter(e=>e.includes(".")).forEach(s=>{let r=s.split(".");t===r[r.length-1]&&r.reduce((r,a)=>(Object.is(e,r)&&i.watchers[s].forEach(i=>i(e[t])),r[a]),i.unobservedData)}),i.pauseReactivity||s()})}walkAndSkipNestedComponents(t,i,s=(()=>{})){(0,e.walk)(t,e=>!e.hasAttribute("jmb-name")&&!e.hasAttribute("jmb-placeholder")||e.isSameNode(this.$el)?i(e):(e.__jmb||s(e),!1))}initializeElements(e,t=(()=>{}),i=!1){this.walkAndSkipNestedComponents(e,e=>void 0===e.__jmb_for_key&&(void 0===e.__jmb_inserted_me&&void this.initializeElement(e,t,i)),e=>{e.__jmb=new d(e)}),this.executeAndClearRemainingShowDirectiveStack(),this.executeAndClearNextTickStack(e)}initializeElement(t,i,s=!1){if(t.hasAttribute("class")&&(0,e.getXAttrs)(t,this).length>0&&(t.__jmb_original_classes=(0,e.convertClassStringToArray)(t.getAttribute("class"))),void 0!==t.__jmb_listeners){for(const[e,i,s,r]of t.__jmb_listeners)e.removeEventListener(i,s,r);t.__jmb_listeners=void 0}void 0===t.__jmb_scope||t.hasAttribute("jmb-scope")||(t.__jmb_scope=void 0),this.registerListeners(t,i,s),this.resolveBoundAttributes(t,!0,i)}updateElements(e,t=(()=>{})){this.walkAndSkipNestedComponents(e,e=>{if(void 0!==e.__jmb_for_key&&!e.isSameNode(this.$el))return!1;this.updateElement(e,t)},e=>{e.__jmb=new d(e)}),this.executeAndClearRemainingShowDirectiveStack(),this.executeAndClearNextTickStack(e)}executeAndClearNextTickStack(e){e===this.$el&&this.nextTickStack.length>0&&requestAnimationFrame(()=>{for(;this.nextTickStack.length>0;)this.nextTickStack.shift()()})}executeAndClearRemainingShowDirectiveStack(){this.showDirectiveStack.reverse().map(e=>new Promise((t,i)=>{e(t,i)})).reduce((e,t)=>e.then(()=>t.then(e=>{e()})),Promise.resolve(()=>{})).catch(t=>{if(t!==e.TRANSITION_CANCELLED)throw t}),this.showDirectiveStack=[],this.showDirectiveLastElement=void 0}updateElement(e,t){this.resolveBoundAttributes(e,!1,t)}registerListeners(t,i,s){(0,e.getXAttrs)(t,this).forEach(({type:e,value:r,modifiers:a,expression:n})=>{switch(e){case"on":(0,h.registerListener)(this,t,r,a,n,i,s);break;case"model":(0,o.registerModelListener)(this,t,a,n,i)}})}resolveBoundAttributes(o,h=!1,c){let l=(0,e.getXAttrs)(o,this);l.forEach(({type:e,value:u,modifiers:d,expression:m})=>{switch(e){case"model":(0,i.handleAttributeBindingDirective)(this,o,"value",m,c,e,d);break;case"bind":if("template"===o.tagName.toLowerCase()&&"key"===u)return;(0,i.handleAttributeBindingDirective)(this,o,u,m,c,e,d);break;case"text":var b=this.evaluateReturnExpression(o,m,c);(0,s.handleTextDirective)(o,b,m);break;case"html":(0,r.handleHtmlDirective)(this,o,m,c);break;case"show":b=this.evaluateReturnExpression(o,m,c);(0,a.handleShowDirective)(this,o,b,d,h);break;case"if":if(l.some(e=>"for"===e.type))return;b=this.evaluateReturnExpression(o,m,c);(0,n.handleIfDirective)(this,o,b,h,c);break;case"for":(0,t.handleForDirective)(this,o,m,h,c);break;case"cloak":o.removeAttribute("jmb-cloak")}})}evaluateReturnExpression(t,i,s=(()=>{})){let r=this,a=s(),n=void 0!==a&&void 0!==a.$self?a.$self:t;return(0,e.saferEval)(t,i,this.$data,{$self:t,...a,$dispatch:this.getDispatchFunction(t),$scope:()=>r.getScopeVars(n)})}evaluateCommandExpression(t,i,s=(()=>{})){let r=this,a=s(),n=void 0!==a&&void 0!==a.$self?a.$self:t;return(0,e.saferEvalNoReturn)(t,i,this.$data,{$self:t,...a,$dispatch:this.getDispatchFunction(t),$scope:()=>r.getScopeVars(n)})}getDispatchFunction(e){return(t,i={})=>{e.dispatchEvent(new CustomEvent(t,{detail:i,bubbles:!0}))}}listenForNewElementsToInitialize(){const e=this.$el,t=new MutationObserver(e=>{for(let t=0;t<e.length;t++){const i=e[t].target.closest("[jmb-name]");i&&i.isSameNode(this.$el)&&("attributes"===e[t].type&&e[t].attributeName,e[t].addedNodes.length>0&&e[t].addedNodes.forEach(e=>{1!==e.nodeType||e.__jmb_inserted_me||e.hasAttribute("jmb-name")&&e.getAttribute("jmb-name")!==this.execName||e.hasAttribute("jmb-placeholder")||this.initializeElement(e,()=>{},!0)}))}});return t.observe(e,{childList:!0,attributes:!0,subtree:!0}),t}getRefsProxy(){var e=this;return new Proxy({},{get(t,i){return"$isAlpineProxy"===i||(e.walkAndSkipNestedComponents(e.$el,e=>{e.hasAttribute("jmb-ref")&&e.getAttribute("jmb-ref")===i&&(s=e)}),s);var s}})}getScopeVars(e){let t=this;if(e===window)return{};let i=null;if(e.hasAttribute("jmb-scope"))i=e;else{let s=e.closest("[jmb-scope]");if(null!==s){let e=s.closest("[jmb-name]");null!==e&&e.getAttribute("jmb-name")===t.execName&&(i=s)}}if(null!==i){void 0===i.__jmb_scope&&(i.__jmb_scope=this.evaluateReturnExpression(i,i.getAttribute("jmb-scope")));let{membrane:e,data:s}=(0,c.wrap)(i.__jmb_scope,(e,i)=>{t.$updateDom()});return s}return{}}}exports.default=d;
},{"./utils":"dB8V","./directives/for":"YwI4","./directives/bind":"apEo","./directives/text":"rqI0","./directives/html":"VLcL","./directives/show":"yazp","./directives/if":"OKCH","./directives/model":"KdFM","./directives/on":"Pi21","./observable":"bXHm","./magic/jmb":"W7MR"}],"ewYM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./component")),t=require("./utils");function o(e){return e&&e.__esModule?e:{default:e}}class n extends e.default{constructor(e){super(e.dom),this.jembeClient=e.jembeClient,this.componentRef=e,this.execName=e.execName}mount(e){super.mount(this.componentRef.jembeClient,this.componentRef.execName,this.componentRef.state,this.componentRef.actions,void 0!==e&&null!==e.api&&e.execName===this.execName?e.api:void 0)}unmount(){super.unmount()}}var s=n;exports.default=s;
},{"./component":"xaPW","./utils":"dB8V"}],"FOZT":[function(require,module,exports) {
"use strict";function t(t){return t.hasAttribute("jmb-name")?t.getAttribute("jmb-name"):t.hasAttribute("jmb-placeholder")?t.getAttribute("jmb-placeholder"):null}function e(n,o,r,i){void 0===i&&(i=n.getAttribute("jmb-name"));let l=t(n);if(null!==l&&l!==i)null!=r&&r(n,l);else for(void 0!==o&&o(n),n=n.firstElementChild;n;)e(n,o,r,i),n=n.nextElementSibling}Object.defineProperty(exports,"__esModule",{value:!0}),exports.walkComponentDom=e,exports.deepCopy=o,exports.getCookie=r,exports.AsyncFunction=void 0;let n=Object.getPrototypeOf(async function(){}).constructor;function o(t){let e,n,r;if("object"!=typeof t||null===t)return t;for(r in e=Array.isArray(t)?[]:{},t)n=t[r],e[r]=o(n);return e}function r(t){let e=null;if(document.cookie&&""!==document.cookie){const n=document.cookie.split(";");for(let o=0;o<n.length;o++){const r=n[o].trim();if(r.substring(0,t.length+1)===t+"="){e=decodeURIComponent(r.substring(t.length+1));break}}}return e}exports.AsyncFunction=n;
},{}],"JRPW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=11;function t(t,r){var a,u,i,s,n=r.attributes;if(r.nodeType!==e&&t.nodeType!==e){for(var o=n.length-1;o>=0;o--)u=(a=n[o]).name,i=a.namespaceURI,s=a.value,i?(u=a.localName||u,t.getAttributeNS(i,u)!==s&&("xmlns"===a.prefix&&(u=a.name),t.setAttributeNS(i,u,s))):t.getAttribute(u)!==s&&t.setAttribute(u,s);for(var b=t.attributes,l=b.length-1;l>=0;l--)u=(a=b[l]).name,(i=a.namespaceURI)?(u=a.localName||u,r.hasAttributeNS(i,u)||t.removeAttributeNS(i,u)):r.hasAttribute(u)||t.removeAttribute(u)}}
},{}],"OYlt":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.toElement=i,exports.compareNodeNames=l,exports.createElementNS=u,exports.moveChildren=m,exports.doc=void 0;var t="http://www.w3.org/1999/xhtml",r="undefined"==typeof document?void 0:document;exports.doc=r;var n=!!r&&"content"in r.createElement("template"),o=!!r&&r.createRange&&"createContextualFragment"in r.createRange();function a(e){var t=r.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}function c(t){return e||(e=r.createRange()).selectNode(r.body),e.createContextualFragment(t).childNodes[0]}function d(e){var t=r.createElement("body");return t.innerHTML=e,t.childNodes[0]}function i(e){return e=e.trim(),n?a(e):o?c(e):d(e)}function l(e,t){var r,n,o=e.nodeName,a=t.nodeName;return o===a||(r=o.charCodeAt(0),n=a.charCodeAt(0),r<=90&&n>=97?o===a.toUpperCase():n<=90&&r>=97&&a===o.toUpperCase())}function u(e,n){return n&&n!==t?r.createElementNS(n,e):r.createElement(e)}function m(e,t){for(var r=e.firstChild;r;){var n=r.nextSibling;t.appendChild(r),r=n}return t}
},{}],"QtAh":[function(require,module,exports) {
"use strict";function e(e,t,l){e[l]!==t[l]&&(e[l]=t[l],e[l]?e.setAttribute(l,""):e.removeAttribute(l))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t={OPTION:function(t,l){var r=t.parentNode;if(r){var a=r.nodeName.toUpperCase();"OPTGROUP"===a&&(a=(r=r.parentNode)&&r.nodeName.toUpperCase()),"SELECT"!==a||r.hasAttribute("multiple")||(t.hasAttribute("selected")&&!l.selected&&(t.setAttribute("selected","selected"),t.removeAttribute("selected")),r.selectedIndex=-1)}e(t,l,"selected")},INPUT:function(t,l){e(t,l,"checked"),e(t,l,"disabled"),t.value!==l.value&&(t.value=l.value),l.hasAttribute("value")||t.removeAttribute("value")},TEXTAREA:function(e,t){var l=t.value;e.value!==l&&(e.value=l);var r=e.firstChild;if(r){var a=r.nodeValue;if(a==l||!l&&a==e.placeholder)return;r.nodeValue=l}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var l,r,a=-1,i=0,u=e.firstChild;u;)if("OPTGROUP"===(r=u.nodeName&&u.nodeName.toUpperCase()))u=(l=u).firstChild;else{if("OPTION"===r){if(u.hasAttribute("selected")){a=i;break}i++}!(u=u.nextSibling)&&l&&(u=l.nextSibling,l=null)}e.selectedIndex=a}}};exports.default=t;
},{}],"Diwz":[function(require,module,exports) {
var process = require("process");
var e=require("process");function r(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function t(e,r){for(var t,n="",i=0,l=-1,o=0,a=0;a<=e.length;++a){if(a<e.length)t=e.charCodeAt(a);else{if(47===t)break;t=47}if(47===t){if(l===a-1||1===o);else if(l!==a-1&&2===o){if(n.length<2||2!==i||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var h=n.lastIndexOf("/");if(h!==n.length-1){-1===h?(n="",i=0):i=(n=n.slice(0,h)).length-1-n.lastIndexOf("/"),l=a,o=0;continue}}else if(2===n.length||1===n.length){n="",i=0,l=a,o=0;continue}r&&(n.length>0?n+="/..":n="..",i=2)}else n.length>0?n+="/"+e.slice(l+1,a):n=e.slice(l+1,a),i=a-l-1;l=a,o=0}else 46===t&&-1!==o?++o:o=-1}return n}function n(e,r){var t=r.dir||r.root,n=r.base||(r.name||"")+(r.ext||"");return t?t===r.root?t+n:t+e+n:n}var i={resolve:function(){for(var n,i="",l=!1,o=arguments.length-1;o>=-1&&!l;o--){var a;o>=0?a=arguments[o]:(void 0===n&&(n=e.cwd()),a=n),r(a),0!==a.length&&(i=a+"/"+i,l=47===a.charCodeAt(0))}return i=t(i,!l),l?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(e){if(r(e),0===e.length)return".";var n=47===e.charCodeAt(0),i=47===e.charCodeAt(e.length-1);return 0!==(e=t(e,!n)).length||n||(e="."),e.length>0&&i&&(e+="/"),n?"/"+e:e},isAbsolute:function(e){return r(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];r(n),n.length>0&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":i.normalize(e)},relative:function(e,t){if(r(e),r(t),e===t)return"";if((e=i.resolve(e))===(t=i.resolve(t)))return"";for(var n=1;n<e.length&&47===e.charCodeAt(n);++n);for(var l=e.length,o=l-n,a=1;a<t.length&&47===t.charCodeAt(a);++a);for(var h=t.length-a,f=o<h?o:h,c=-1,s=0;s<=f;++s){if(s===f){if(h>f){if(47===t.charCodeAt(a+s))return t.slice(a+s+1);if(0===s)return t.slice(a+s)}else o>f&&(47===e.charCodeAt(n+s)?c=s:0===s&&(c=0));break}var g=e.charCodeAt(n+s);if(g!==t.charCodeAt(a+s))break;47===g&&(c=s)}var u="";for(s=n+c+1;s<=l;++s)s!==l&&47!==e.charCodeAt(s)||(0===u.length?u+="..":u+="/..");return u.length>0?u+t.slice(a+c):(a+=c,47===t.charCodeAt(a)&&++a,t.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(r(e),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,i=-1,l=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!l){i=o;break}}else l=!1;return-1===i?n?"/":".":n&&1===i?"//":e.slice(0,i)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');r(e);var n,i=0,l=-1,o=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var a=t.length-1,h=-1;for(n=e.length-1;n>=0;--n){var f=e.charCodeAt(n);if(47===f){if(!o){i=n+1;break}}else-1===h&&(o=!1,h=n+1),a>=0&&(f===t.charCodeAt(a)?-1==--a&&(l=n):(a=-1,l=h))}return i===l?l=h:-1===l&&(l=e.length),e.slice(i,l)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!o){i=n+1;break}}else-1===l&&(o=!1,l=n+1);return-1===l?"":e.slice(i,l)},extname:function(e){r(e);for(var t=-1,n=0,i=-1,l=!0,o=0,a=e.length-1;a>=0;--a){var h=e.charCodeAt(a);if(47!==h)-1===i&&(l=!1,i=a+1),46===h?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1);else if(!l){n=a+1;break}}return-1===t||-1===i||0===o||1===o&&t===i-1&&t===n+1?"":e.slice(t,i)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return n("/",e)},parse:function(e){r(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var n,i=e.charCodeAt(0),l=47===i;l?(t.root="/",n=1):n=0;for(var o=-1,a=0,h=-1,f=!0,c=e.length-1,s=0;c>=n;--c)if(47!==(i=e.charCodeAt(c)))-1===h&&(f=!1,h=c+1),46===i?-1===o?o=c:1!==s&&(s=1):-1!==o&&(s=-1);else if(!f){a=c+1;break}return-1===o||-1===h||0===s||1===s&&o===h-1&&o===a+1?-1!==h&&(t.base=t.name=0===a&&l?e.slice(1,h):e.slice(a,h)):(0===a&&l?(t.name=e.slice(1,o),t.base=e.slice(1,h)):(t.name=e.slice(a,o),t.base=e.slice(a,h)),t.ext=e.slice(o,h)),a>0?t.dir=e.slice(0,a-1):l&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};i.posix=i,module.exports=i;
},{"process":"FT5O"}],"Orhj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("./util"),n=o(require("./specialElHandlers")),i=require("path-browserify");function o(e){return e&&e.__esModule?e:{default:e}}var t=1,r=11,d=3,a=8;function l(){}function f(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}function u(i){return function(o,u,c){if(c||(c={}),"string"==typeof u)if("#document"===o.nodeName||"HTML"===o.nodeName||"BODY"===o.nodeName){var s=u;(u=e.doc.createElement("html")).innerHTML=s}else u=(0,e.toElement)(u);else u.nodeType===r&&(u=u.firstElementChild);var m=c.getNodeKey||f,p=c.onBeforeNodeAdded||l,N=c.onNodeAdded||l,v=c.onBeforeElUpdated||l,E=c.onElUpdated||l,h=c.onBeforeNodeDiscarded||l,b=c.onNodeDiscarded||l,g=c.onBeforeElChildrenUpdated||l,S=!0===c.childrenOnly,x=Object.create(null),C=[];function T(e){C.push(e)}function y(e,n,i){!1!==h(e)&&(n&&n.removeChild(e),b(e),function e(n,i){if(n.nodeType===t)for(var o=n.firstChild;o;){var r=void 0;i&&(r=m(o))?T(r):(b(o),o.firstChild&&e(o,i)),o=o.nextSibling}}(e,i))}function A(n){N(n);for(var i=n.firstChild;i;){var o=i.nextSibling,t=m(i);if(t){var r=x[t];r&&(0,e.compareNodeNames)(i,r)?(i.parentNode.replaceChild(r,i),V(r,i)):A(i)}else A(i);i=o}}function V(o,r,l){var f=m(r);if(f&&delete x[f],!l){if(!1===v(o,r))return;if(i(o,r),E(o),!1===g(o,r))return}"TEXTAREA"!==o.nodeName?function(i,o){var r,l,f,u,c,s=o.firstChild,N=i.firstChild;e:for(;s;){for(u=s.nextSibling,r=m(s);N;){if(f=N.nextSibling,s.isSameNode&&s.isSameNode(N)){s=u,N=f;continue e}l=m(N);var v=N.nodeType,E=void 0;if(v===s.nodeType&&(v===t?(r?r!==l&&((c=x[r])?f===c?E=!1:(i.insertBefore(c,N),l?T(l):y(N,i,!0),N=c):E=!1):l&&(E=!1),(E=!1!==E&&(0,e.compareNodeNames)(N,s))&&(!s.isEqualNode(N)&&s.nextElementSibling&&s.nextElementSibling.isEqualNode(N)?E=!1:V(N,s))):v!==d&&v!=a||(E=!0,N.nodeValue!==s.nodeValue&&(N.nodeValue=s.nodeValue))),E){s=u,N=f;continue e}if(s.nextElementSibling&&s.nextElementSibling.isEqualNode(N)){const e=s.cloneNode(!0);i.insertBefore(e,N),A(e),s=s.nextElementSibling.nextSibling,N=f;continue e}l?T(l):y(N,i,!0),N=f}if(r&&(c=x[r])&&(0,e.compareNodeNames)(c,s))i.appendChild(c),V(c,s);else{var h=p(s);!1!==h&&(h&&(s=h),s.actualize&&(s=s.actualize(i.ownerDocument||e.doc)),i.appendChild(s),A(s))}s=u,N=f}!function(e,n,i){for(;n;){var o=n.nextSibling;(i=m(n))?T(i):y(n,e,!0),n=o}}(i,N,l);var b=n.default[i.nodeName];b&&b(i,o)}(o,r):n.default.TEXTAREA(o,r)}!function e(n){if(n.nodeType===t||n.nodeType===r)for(var i=n.firstChild;i;){var o=m(i);o&&(x[o]=i),e(i),i=i.nextSibling}}(o);var B=o,q=B.nodeType,D=u.nodeType;if(!S)if(q===t)D===t?(0,e.compareNodeNames)(o,u)||(b(o),B=(0,e.moveChildren)(o,(0,e.createElementNS)(u.nodeName,u.namespaceURI))):B=u;else if(q===d||q===a){if(D===q)return B.nodeValue!==u.nodeValue&&(B.nodeValue=u.nodeValue),B;B=u}if(B===u)b(o);else{if(u.isSameNode&&u.isSameNode(B))return;if(V(B,u,S),C)for(var z=0,M=C.length;z<M;z++){var O=x[C[z]];O&&y(O,O.parentNode,!1)}}return!S&&B!==o&&o.parentNode&&(B.actualize&&(B=B.actualize(o.ownerDocument||e.doc)),o.parentNode.replaceChild(B,o)),B}}
},{"./util":"OYlt","./specialElHandlers":"QtAh","path-browserify":"Diwz"}],"APca":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./morphAttrs")),r=t(require("./morphdom"));function t(e){return e&&e.__esModule?e:{default:e}}var u=(0,r.default)(e.default),o=u;exports.default=o;
},{"./morphAttrs":"JRPW","./morphdom":"Orhj"}],"IVsl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.JembeClient=void 0;var _index=_interopRequireDefault(require("./componentApi/index.js")),_utils=require("./utils.js"),_index2=_interopRequireDefault(require("./morphdom/index.js")),_utils2=require("./componentApi/utils.js"),_jmb=_interopRequireDefault(require("./componentApi/magic/jmb.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}class ComponentRef{constructor(e,t,s,n,o){this.jembeClient=e,this.execName=t,this.hierarchyLevel=t.split("/").length,this.isPageComponent=2===this.hierarchyLevel,this.state=s.state,this.url=s.url,this.changesUrl=s.changesUrl,this.actions=void 0!==s.actions?s.actions:{},this.dom=this._cleanDom(n),this.onDocument=o,this.placeHolders={},this.permanentPlaceHolders={},this.api=null}mount(e){this._getPlaceHolders(),null===this.api&&(this.api=new _index.default(this)),this.api.mount(e),this._add_support_for_jmb_changed_attr_to_inputs()}remove(){const e=this.dom;return this.unmount(),e.remove(),this.execName}unmount(){null!==this.api&&this.api.unmount(),this.api=null,this.dom=null}toJsonRequest(){return{execName:this.execName,state:this.state}}merge(e,t){if(!this.isPageComponent||!this.onDocument)if(this.onDocument&&void 0!==t&&t.dom.isSameNode(this.dom)&&Object.keys(e.placeHolders).includes(this.execName))e.placeHolders[this.execName].isSameNode(this.dom)||(e.placeHolders[this.execName].replaceWith(this.dom),e.placeHolders[this.execName]=this.dom);else{if(this.isPageComponent){let e=this.jembeClient.document.documentElement;this.dom=e=this._morphdom(e,this.dom),this.dom.setAttribute("jmb-name",this.execName)}else if(Object.keys(e.placeHolders).includes(this.execName))this.dom=this._morphdom(e.placeHolders[this.execName],this.dom),e.placeHolders[this.execName]=this.dom;else{const t=document.createElement("template");t.setAttribute("jmb-placeholder",this.execName);const s=e.permanentPlaceHolders[this.execName].insertAdjacentElement("afterend",t);this.dom=this._morphdom(s,this.dom),e.placeHolders[this.execName]=this.dom}this.onDocument=!0,this.mount(void 0!==t&&t.execName===this.execName?t:void 0)}}_morphdom(e,t){return(0,_index2.default)(e,t,{getNodeKey:e=>e.nodeType===Node.ELEMENT_NODE&&e.hasAttribute("jmb-name")?e.getAttribute("jmb-name"):e.id,onBeforeElUpdated:(e,t)=>!e.isEqualNode(t)&&(!(!this.isPageComponent&&e.hasAttribute("jmb-name")&&e.getAttribute("jmb-name")!==this.execName)&&((!e.hasAttribute("jmb-placeholder")||e.getAttribute("jmb-placeholder")===this.execName)&&!e.hasAttribute("jmb-ignore"))),childrenOnly:this.isPageComponent})}_getPlaceHolders(){this.placeHolders={},this.permanentPlaceHolders={},(0,_utils.walkComponentDom)(this.dom,e=>{e.hasAttribute("jmb-placeholder-permanent")&&(this.permanentPlaceHolders[e.getAttribute("jmb-placeholder-permanent")]=e)},(e,t)=>{this.placeHolders[t]=e})}_cleanDom(e){if("string"==typeof e){let t=e.trim();if(this.isPageComponent){const s=this.jembeClient.domParser.parseFromString(t,"text/html");s.documentElement.setAttribute("jmb-name",this.execName),e=s.documentElement}else{let s=this.jembeClient.document.createElement("template");if(s.innerHTML=t,s.content.childNodes.length>1||0===s.content.childNodes.length||s.content.firstChild.nodeType===Node.TEXT_NODE||1===s.content.childNodes.length&&(s.content.firstChild.hasAttribute("jmb-name")||s.content.firstChild.hasAttribute("jmb-placeholder"))){let e=this.jembeClient.document.createElement("div"),t=s.content.firstChild;for(;t;){let s=t.nextSibling;e.appendChild(t),t=s}s.content.appendChild(e)}s.content.firstChild.setAttribute("jmb-name",this.execName),e=s.content.firstChild}}return e.removeAttribute("jmb-data"),e}_add_support_for_jmb_changed_attr_to_inputs(){for(const e of this.dom.querySelectorAll("input"))e.removeEventListener("change",this._jmb_input_changed_attr_listener,!1),e.addEventListener("change",this._jmb_input_changed_attr_listener,!1)}_jmb_input_changed_attr_listener(e){e.target.setAttribute("jmb-input-changed","")}}class UploadedFile{constructor(e,t,s,n){this.execName=e,this.paramName=t,this.fileUploadId=s,this.files=n,this.multipleFiles=n instanceof FileList||n instanceof Array}addToFormData(e){if(this.multipleFiles)for(const t of this.files)e.append(this.fileUploadId,t);else e.append(this.fileUploadId,this.files)}}class JembeClient{constructor(e=document){this.document=e,this.components={},this.getComponentsFromDocument(),this.updateLocation(!0),this.commands=[],this.filesForUpload={},this.domParser=new DOMParser,this.xRequestUrl=null,this.xRequestsInProgress=0,this.xRequestActiveElement=null,this.xRequestDisabledElements=[],this.disableInputBeforeRequestTimeoutId=null,window.onpopstate=this.onHistoryPopState,this.xRequestHeadersGenerators=[]}getComponentsFromDocument(){this.components={};let componentsNodes=this.document.querySelectorAll("[jmb-name][jmb-data]");for(const componentNode of componentsNodes){const componentRef=new ComponentRef(this,componentNode.getAttribute("jmb-name"),eval(`(${componentNode.getAttribute("jmb-data")})`),componentNode,!0);this.components[componentRef.execName]=componentRef,componentRef.mount()}}getComponentsAndGlobalsFromXResponse(e){let t={},s={removeComponents:[]};for(const n of e)if(Object.keys(n).includes("globals"))s={removeComponents:void 0!==n.removeComponents?n.removeComponents:[]};else{n.dom;t[n.execName]=new ComponentRef(this,n.execName,{url:n.url,changesUrl:n.changesUrl,state:n.state,actions:n.actions},n.dom,!1)}return{components:t,globals:s}}updateDocument({components:e,globals:t}){let s={};for(const[m,d]of Object.entries(this.components))void 0===e[m]?s[m]=d:s[m]=e[m];for(const[m,d]of Object.entries(e))void 0===s[m]&&(s[m]=d);let n=Object.values(s).filter(e=>e.isPageComponent).map(e=>e.execName),o=n[0];if(n.length>1)for(const m of n)s[m].onDocument||(o=m);let i=[o],a={};for(;i.length>0;){const e=s[i.shift()];if(void 0!==e){let t=this.components[e.execName],s=Object.values(a).find(t=>Object.keys(t.placeHolders).includes(e.execName)||Object.keys(t.permanentPlaceHolders).includes(e.execName));e.merge(s,t),a[e.execName]=e;for(const n of Object.keys(e.placeHolders))i.push(n);for(const n of Object.keys(e.permanentPlaceHolders))Object.keys(e.placeHolders).includes(n)||i.push(n)}}for(const[m,d]of Object.entries(this.components))Object.keys(a).includes(m)&&a[m]===d||d.unmount();let r,l=[];for(;void 0!==(r=t.removeComponents.pop());)if(Object.keys(a).includes(r)&&!l.includes(r)){for(const e of Object.keys(a[r].placeHolders))t.removeComponents.push(e);l.push(a[r].remove()),delete a[r.split("/").slice(0,-1).join("/")].placeHolders[r]}for(const m of l)delete a[m];this.components=a}addInitialiseCommand(e,t,s=!0){const n=this.commands.filter(t=>"init"===t.type&&t.componentExecName===e);if(!0===s&&n.length>0){const e=n[0];for(const[s,n]of Object.entries(t))e.initParams=this._updateParam(e.initParams,s,n)}else{if(!0===s&&0===Object.keys(t).length&&void 0!==this.components[e])return;let o=!0===s&&void 0!==this.components[e]?(0,_utils.deepCopy)(this.components[e].state):{};for(const[e,s]of Object.entries(t))o=this._updateParam(o,e,s);if(!1===s&&n>0){const e=n[0];e.initParams=o,e.mergeExistingParams=s}else this.commands.push({type:"init",componentExecName:e,initParams:o,mergeExistingParams:s})}}_updateParam(e,t,s){if(t.startsWith(".")||t.endsWith("."))throw"paramName cant start or end in dot (.)";return this._updateParamR(e,t.split("."),s)}_updateParamR(e,t,s){let n=t[0];return 1===t.length?e[n]=s:void 0===e[n]?e[n]=this._updateParamR({},t.slice(1),s):e[n]=this._updateParamR(e[n],t.slice(1),s),e}addCallCommand(e,t,s=[],n={}){this.commands.push({type:"call",componentExecName:e,actionName:t,args:s,kwargs:n})}addEmitCommand(e,t,s={},n=null){this.commands.push({type:"emit",componentExecName:e,eventName:t,params:s,to:n})}addFilesForUpload(e,t,s){let n=null;for(const o of Object.values(this.filesForUpload))o.execName===e&&o.paramName===t&&(n=o.fileUploadId);if(null!==n&&delete this.filesForUpload[n],(s instanceof FileList||s instanceof Array)&&s.length>0||s instanceof File){let n=null;for(;null==n||Object.keys(this.filesForUpload).includes(n);)n=Math.random().toString(36).substring(7);this.filesForUpload[n]=new UploadedFile(e,t,n,s),this.addInitialiseCommand(e,{[t]:n})}else{let s=this.commands.findIndex(s=>s.componentExecName===e&&"init"===s.type&&Object.keys(s.initParams).includes(t)&&1===Object.keys(s.initParams).length);s>=0&&this.commands.splice(s,1)}}getXUploadRequestFormData(){if(0===Object.keys(this.filesForUpload).length)return null;let e=new FormData;for(const t of Object.values(this.filesForUpload))t.addToFormData(e);return e}getXRequestJson(){return JSON.stringify({components:Object.values(this.components).map(e=>e.toJsonRequest()),commands:this.commands})}setXRequestUrl(e){this.xRequestUrl=e}executeUpload(){const e=this.getXUploadRequestFormData();if(null===e)return new Promise((e,t)=>{e(null)});const t=0===this.xRequestHeadersGenerators.length?{}:this.calculateXRequestHeaders();return t["X-JEMBE"]="upload",window.fetch("/jembe/upload_files",{method:"POST",cache:"no-cache",credentials:"same-origin",redirect:"follow",referrer:"no-referrer",headers:t,body:e}).then(e=>{if(!e.ok)throw this.dispatchUpdatePageErrorEvent(e,null,!1),console.log("Error in x-jmebe upload response"),Error("errorInJembeResponse");return e.json()}).then(e=>{for(const t of Object.keys(e.files)){const s=e.files[t],n=this.filesForUpload[t];this.addInitialiseCommand(n.execName,{[n.paramName]:n.multipleFiles?s:s[0]})}return this.filesForUpload={},e.fileUploadResponseId})}executeCommands(e=!0,t=!0){const s=null!==this.xRequestUrl?this.xRequestUrl:window.location.href;this.dispatchStartUpdatePageEvent(!0,e),this.executeUpload().then(n=>{const o=this.getXRequestJson();this.commands=[];const i=0===this.xRequestHeadersGenerators.length?{}:this.calculateXRequestHeaders();i["X-JEMBE"]="commands",null!==n&&(i["X-JEMBE-RELATED-UPLOAD"]=n),window.fetch(s,{method:"POST",cache:"no-cache",credentials:"same-origin",redirect:"follow",referrer:"no-referrer",headers:i,body:o}).then(t=>{if(!t.ok)throw e&&(this.xRequestsInProgress-=1,this.enableInputsAfterResponse()),console.info("Error x-jembe response",t),this.dispatchUpdatePageErrorEvent(t,null,e),Error("errorInJembeResponse");return t.json()}).then(e=>this.getComponentsAndGlobalsFromXResponse(e)).then(s=>{this.updateDocument(s),t&&e&&this.updateLocation(),e&&(this.xRequestsInProgress-=1,this.enableInputsAfterResponse()),this.dispatchUpdatePageEvent(!0,e,this.components)}).catch(t=>{"errorInJembeResponse"!=t.message&&(console.info("Error x-jembe request",t),this.dispatchUpdatePageErrorEvent(null,t,e)),e&&(this.xRequestsInProgress-=1,this.enableInputsAfterResponse())})}).catch(t=>{"errorInJembeResponse"!=t.message&&(console.info("Error x-jembe request",t),this.dispatchUpdatePageErrorEvent(null,t,e)),e&&(this.xRequestsInProgress-=1,this.enableInputsAfterResponse())})}updateLocation(e=!1){let t=null,s=-1,n=[];for(const o of Object.values(this.components))o.hierarchyLevel>s&&!0===o.changesUrl&&(t=o,s=o.hierarchyLevel),n.push({execName:o.execName,state:o.state});null!==t&&(e?window.history.replaceState(n,"",t.url):window.history.pushState(n,"",t.url))}onHistoryPopState(e){if(null===e.state)window.location=document.location;else{for(const t of e.state)this.jembeClient.addInitialiseCommand(t.execName,t.state);for(const t of e.state)this.jembeClient.addCallCommand(t.execName,"display");this.jembeClient.executeCommands(!0,!1)}}component(e){const t=e.closest("[jmb-name]").getAttribute("jmb-name");return new _jmb.default(this,t)}dispatchUpdatePageEvent(e=!0,t=!0,s={}){window.dispatchEvent(new CustomEvent("jembeUpdatePage",{detail:{isXUpdate:e,inputsDisabled:t,components:Object.fromEntries(Object.entries(s).map(([e,t])=>[e,t.dom]))}}))}dispatchStartUpdatePageEvent(e=!0,t=!0){t&&e&&(this.xRequestsInProgress+=1,1===this.xRequestsInProgress&&(this.disableInputBeforeRequestTimeoutId=window.setTimeout(()=>{this.disableInputsBeforeRequest()},50))),window.dispatchEvent(new CustomEvent("jembeStartUpdatePage",{detail:{isXUpdate:e,inputsDisabled:t}}))}dispatchUpdatePageErrorEvent(e=null,t=null,s=!0){window.dispatchEvent(new CustomEvent("jembeUpdatePageError",{detail:{inputsDisabled:s,networkError:null!==t,response:e,error:t}}))}disableInputsBeforeRequest(){null!==this.document.activeElement&&(this.xRequestActiveElement=this.document.activeElement),(0,_utils2.walk)(this.document.documentElement,e=>{if(e.hasAttribute("jmb-ignore"))return!1;"button"===e.tagName.toLowerCase()||"select"===e.tagName.toLowerCase()||"input"===e.tagName.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)?(e.setAttribute("jmb-node-initially-disabled",e.disabled),e.disabled||(e.disabled=!0,this.xRequestDisabledElements.push(()=>{e.hasAttribute("jmb-node-initially-disabled")&&(e.disabled="true"===e.getAttribute("jmb-node-initially-disabled"),e.removeAttribute("jmb-node-initially-disabled"))}))):"input"!==e.tagName.toLowerCase()&&"textarea"!==e.tagName.toLowerCase()||(e.setAttribute("jmb-node-initially-readonly",e.readOnly),e.setAttribute("jmb-node-initially-disabled",e.disabled),e.readOnly||(e.readOnly=!0,e.disabled=!0,this.xRequestDisabledElements.push(()=>{e.hasAttribute("jmb-node-initially-readonly")&&(e.readOnly="true"===e.getAttribute("jmb-node-initially-readonly"),e.removeAttribute("jmb-node-initially-readonly")),e.hasAttribute("jmb-node-initially-disabled")&&(e.disabled="true"===e.getAttribute("jmb-node-initially-disabled"),e.removeAttribute("jmb-node-initially-disabled"))})))})}enableInputsAfterResponse(){if(window.clearTimeout(this.disableInputBeforeRequestTimeoutId),0===this.xRequestsInProgress){for(let e of this.xRequestDisabledElements)e();this.xRequestDisabledElements=[],null!==this.xRequestActiveElement&&this.document.contains(this.xRequestActiveElement)&&this.xRequestActiveElement.focus(),this.xRequestActiveElement=null}}addXRequestHeaderGenerator(e){this.xRequestHeadersGenerators.push(e)}calculateXRequestHeaders(){let e={};for(const t of this.xRequestHeadersGenerators)e={...e,...t()};return e}getCookie(e){return(0,_utils.getCookie)(e)}walkComponent(e,t){e instanceof String&&(e=this.document.querySelector(`[jmb-name=${e}]`)),(0,_utils.walkComponentDom)(e,t)}walkDocument(e){(0,_utils2.walk)(this.document.documentElement,e)}}exports.JembeClient=JembeClient;
},{"./componentApi/index.js":"ewYM","./utils.js":"FOZT","./morphdom/index.js":"APca","./componentApi/utils.js":"dB8V","./componentApi/magic/jmb.js":"W7MR"}],"coHq":[function(require,module,exports) {
"use strict";var e=require("./client.js");window.jembeClient=new e.JembeClient(document),window.jembeClient.dispatchUpdatePageEvent(!1,!1);
},{"./client.js":"IVsl"}]},{},["coHq"], null)
//# sourceMappingURL=jembe.js.map